{"ast":null,"code":"const url = require(\"url\");\n\nconst template = require(\"nba-client-template\");\n\nconst fetch = require(\"node-fetch\");\n\nconst HEADERS = {\n  \"Accept-Encoding\": \"gzip, deflate\",\n  \"Accept-Language\": \"en-US\",\n  Accept: \"*/*\",\n  \"User-Agent\": template.user_agent,\n  Referer: template.referrer,\n  Connection: \"keep-alive\",\n  \"Cache-Control\": \"no-cache\",\n  Origin: \"http://stats.nba.com\"\n};\n\nfunction createUrlString(_url, query) {\n  const urlObj = url.parse(_url);\n  urlObj.query = query;\n  return urlObj.format();\n}\n\nmodule.exports = function getJson(_url, query, _options = {}) {\n  const urlStr = createUrlString(_url, query);\n  const options = { ..._options,\n    headers: { ..._options.headers,\n      ...HEADERS\n    }\n  };\n  return fetch(urlStr, options).then(resp => {\n    if (resp.ok) return resp.json();\n    return resp.text().then(function (text) {\n      throw new Error(\"\".concat(resp.status, \" \").concat(resp.statusText, \" \\u2013 \").concat(text));\n    });\n  });\n};","map":null,"metadata":{},"sourceType":"script"}